

# 登录

* 使用EBS管理员账号进行登录（管理员类型）
    * 可以通过URL重写等方式，直接调用EBS接口。
    * 在埋点分析平台中就使用JWT进行校验

# 可视化展示

数据清洗性能是否允许一次清洗所有，并同步返回状态？

刷新按钮

## 性能指标

* 最大内容绘制（显示饼图）
    * WebVitals 事件下 vitals_lcp
        * 优秀：小于2.5秒
        * 一般：2.5秒 ~ 4秒
        * 不良：大于4秒
* 首次输入延迟（显示饼图）
    * WebVitals 事件下 vitals_fid
        * 优秀：小于100毫秒
        * 一般：100毫秒 ~ 300毫秒
        * 不良：大于300毫秒
* 累积布局偏移（显示饼图）
    * WebVitals 事件下 vitals_cls
        * 优秀：小于0.1
        * 一般：0.1 ~ 0.25
        * 不良：大于0.25

## 用户分布

* 浏览器（显示饼图）
    * Chrome > 100
    * Chrome  80 ~ 100
    * Chrome < 80
    * Firefox
    * Safari
    * 其他
* 分辨率（显示饼图）
## 高频页面

筛选：用户、身份、时间范围

取事件 PageRouterEnter 的数据，以 RouterName 进行统计，能否显示 RouterTitle ？

柱状图，从高到低显示 top20的页面，及数量

## 高频操作

筛选：用户、身份、时间范围、RouterName

以下维度统计：

RouterName + TableOperation 取字段 DetailData.button_title

RouterName + TableOperationBatch 取字段  DetailData.button_title

RouterName + PageClickButton 取字段  DetailData.button_title

柱状图，从高到低显示 top20的页面操作，及数量

## 异常指标

显示待处理、处理中、已处理的数量


# 列表查询数据

## 用户列表

用户管理所有的用户，**需要分页**

* 使用会话中的 UserId，从EBS进行同步其他信息
列表显示字段

|字段名|说明|
|:----|:----|
|用户名|EBS职员的英文名|
|状态|    |
|部门|EBS职员的部门|
|职位|EBS职员的职位|
|角色|EBS职员的角色|
|身份|EBS职员的身份|

筛选项

|筛选项|类型|说明|
|:----|:----|:----|
|用户名|输入框|模糊查询|
|状态|下拉框|    |
|部门|下拉框|    |
|职位|下拉框|    |
|角色|下拉框|    |
|身份|下拉框|    |

操作

* 查看会话
    * 跳转到会话列表
* 查看配置
    * 跳转到用户配置列表
详情

* 用户会话
    * 查看全部 按钮，点击跳转到 会话列表（不需要带下面甘特图筛选项的参数）
    * 筛选项：平台终端，会话时间范围（默认今天）
    * 以甘特图的形式，展示该用户在时间范围内的会话
    * 点击甘特图条目，跳转到会话列表，筛选出指定的会话
* 查看配置
    * 以键值对形式显示用户的配置
        * 新菜单
        * 固定菜单
        * 新版页面
        * 分屏全屏模式
        * 分屏上下模式
        * 旧版分屏上下模式
        * 旧版分屏固定模式
        * 旧版分屏展开模式
        * 旧版表格视图类型
        * 工作台视图表格类型
        * 图片全屏模式
        * 图片展开模式
        * 图片自适应模式
        * 图片新窗口模式
        * 比价工具距离
        * 复制配置
        * 报价配置

## 会话列表

用于查询会话记录，**需要分页**

对应 mongodb 的 WebLogSession 表

列表显示字段

|字段名|mongodb字段|说明|
|:----|:----|:----|
|平台终端|Platform|平台终端|
|会话时间|Date|    |
|用户名|    |通过 UserId 解析|
|身份|    |EBS职员的身份|
|IP地址|IP|    |
|系统语言|Language|    |
|屏幕大小|Viewport|    |
|视窗大小|BrowserViewport|    |
|EBS版本号|Version|    |
|UserAgent|UserAgent|    |

筛选项

|筛选项|类型|说明|
|:----|:----|:----|
|平台终端|下拉框|    |
|用户名|输入框|模糊查询|
|身份|下拉框|EBS职员的身份|
|会话时间|时间范围选择|    |

操作

* 查看用户
    * 跳转到用户列表
* 查看事件
    * 跳转到事件列表
详情

* 基本信息
    * 以键值对形式显示列表字段
* 会话轨迹
    * 以时间轴的方式，显示该会话关联的事件（时间+事件名）
# 

## 事件列表

用于查询事件记录，需要**分页**

对应 mongodb 的 WebLogDetail 表

列表显示字段

|字段名|mongodb字段|说明|
|:----|:----|:----|
|平台终端|    |    |
|事件类型|    |事件类型|
|事件名称|    |通过 TrackerName 关联|
|触发时间|TrackerTime|    |
|用户名|    |通过 会话 解析|
|身份|    |EBS职员的身份|
|页面URL|RouterUrl|    |
|页面参数|RouterQuery|    |
|页面附加参数|RouterParams|    |
|页面来源|RouterReferer|    |
|页面编码|RouterName|    |
|页面标题|RouterTitle|    |
|日志详情|DetailData|展示JSON文本|

筛选项

|筛选项|类型|说明|
|:----|:----|:----|
|平台终端|下拉框|    |
|事件类型|下拉框|事件类型|
|用户名|输入框|模糊查询|
|身份|下拉框|EBS职员的身份|
|触发时间|时间范围选择|    |
|日志详情|输入框|模糊查询|

操作

* 查看用户
    * 跳转到用户列表
* 查看会话
    * 跳转到会话列表

详情

* 基本信息
    * 以键值对形式显示事件信息

## 异常列表

基本与事件列表一致，隐藏字段：事件类型，增加字段：状态

列表显示字段

|字段名|mongodb字段|说明|
|:----|:----|:----|
|状态|    |待处理、处理中、已处理|
|平台终端|    |    |
|事件名称|    |通过 TrackerName 关联|
|触发时间|TrackerTime|    |
|用户名|    |通过 会话 解析|
|身份|    |EBS职员的身份|
|页面URL|RouterUrl|    |
|页面参数|RouterQuery|    |
|页面附加参数|RouterParams|    |
|页面来源|RouterReferer|    |
|页面编码|RouterName|    |
|页面标题|RouterTitle|    |
|日志详情|DetailData|展示JSON文本|

筛选项

|筛选项|类型|说明|
|:----|:----|:----|
|平台终端|下拉框|    |
|用户名|输入框|模糊查询|
|身份|下拉框|EBS职员的身份|
|触发时间|时间范围选择|    |
|日志详情|输入框|模糊查询|

操作

* 查看用户
跳转到用户列表

* 查看会话
    * 跳转到会话列表
* 开始处理
    * 点击将状态更新为处理中
* 处理完成
    * 点击将状态更新为已处理

详情

* 基本信息
    * 以键值对形式显示事件信息
## 



## 用户配置列表

列表显示字段

|字段名|mongodb字段|
|:----|:----|
|用户名|    |
|身份|    |
|新菜单|menu_is_new_style|
|固定菜单|menu_is_expand|
|新版页面|page_is_new_style|
|分屏全屏模式|split_sider_is_fullscreen|
|分屏上下模式|split_sider_is_top_bottom|
|旧版分屏上下模式|split_sider_is_top_bottom_old|
|旧版分屏固定模式|split_sider_is_fixed_old|
|旧版分屏展开模式|split_sider_tabs_is_expand_old|
|旧版表格视图类型|table_view_mode_old|
|工作台视图表格类型|work_bench_data_mode|
|图片全屏模式|picture_is_fullscreen|
|图片展开模式|picture_is_expand|
|图片自适应模式|picture_is_fill|
|图片新窗口模式|picture_is_new_blank|
|比价工具距离|price_tool_position_top|
|复制配置|copy_config_data|
|报价配置|quote_config_data|

筛选项

|筛选项|类型|说明|
|:----|:----|:----|
|用户名|    |通过 会话 解析|
|身份|    |EBS职员的身份|

操作

* 导出
    * 导出所有列表字段




# 基础数据


## 事件管理

用于维护事件名称，查找事件

列表显示字段

|字段名|mongodb字段|说明|
|:----|:----|:----|
|平台终端|    |    |
|事件名称|    |    |
|事件标识|TrackerName|    |
|事件描述|    |    |

筛选项

|筛选项|类型|说明|
|:----|:----|:----|
|平台终端|下拉框|    |
|事件名称|输入框|模糊查询|
|事件标识|输入框|    |
|事件描述|输入框|模糊查询|

操作

* 查看事件
    * 跳转到事件列表

详情

* 事件属性
* 关联的属性
    * 新建、删除
|字段名|mongodb字段|说明|
|:----|:----|:----|
|属性名称|    |    |
|属性标识|    |    |
|属性描述|    |    |



## 属性管理

用于维护属性名称，查找属性

列表显示字段

|字段名|mongodb字段|说明|
|:----|:----|:----|
|属性名称|    |    |
|属性标识|    |    |
|属性描述|    |    |

筛选项

|筛选项|类型|说明|
|:----|:----|:----|
|属性名称|输入框|模糊查询|
|属性标识|输入框|    |
|属性描述|输入框|模糊查询|



详情

* 事件属性
* 关联的事件
    * 新建、删除
|字段名|mongodb字段|说明|
|:----|:----|:----|
|事件名称|    |    |
|事件标识|    |    |
|事件描述|    |    |


# 系统内置


## 平台终端

可以不做界面，直接写数据库，或定义枚举值

* 用于在查询会话/事件时做筛选
|名称|标识|
|:----|:----|
|EBS平台|EBS|
|企点H5|QiDian|

## 事件类型

将所有事件进行分类

* 行为事件
    * * 异常类型 
    * 用于转换为 待处理异常问题工单
    * ErrorRequest  ErrorScript
* 活跃类型
    * 用于检测用户活跃状态
    * BrowserFocus  UserActivityStatus
* 性能指标
    * WebVitals
* 用户修改配置
    * UserConfig

## 其他基础数据

包括但不限于：部门、身份、角色




